language: generic
sudo: required
install: skip
cache: false
git:
  depth: false
os:
  - linux
branches:
  only:
    - master
services:
  - docker
script: |
  docker login -u=$DOCKER_USER -p=$DOCKER_PASS
  docker build --pull=true --no-cache=true --build-arg WGUPDATE_VER=2.1 --build-arg WEBGRAB_VER=2.1.0 -t "synker/webgraboneshot:${TRAVIS_BUILD_NUMBER}" -t synker/webgraboneshot:latest .
  docker push synker/webgraboneshot
  cd WebGrabFromUrl
  docker build --no-cache=true --pull=true -t "synker/webgraboneshoturl:${TRAVIS_BUILD_NUMBER}" -t synker/webgraboneshoturl:latest .
  docker push synker/webgraboneshoturl

notifications: # set notification options
  email:
    recipients:
      - tunisienheni@gmail.com
    on_success: change
    on_failure: change